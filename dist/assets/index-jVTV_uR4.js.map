{"version":3,"file":"index-jVTV_uR4.js","sources":["../../src/scenes/BootScene.ts","../../src/entities/drones/BaseDrone.ts","../../src/entities/drones/Spectre.ts","../../src/entities/drones/Badger.ts","../../src/systems/DroneManager.ts","../../src/scenes/GameScene.ts","../../src/main.ts"],"sourcesContent":["import { Scene } from 'phaser';\n\nexport class BootScene extends Scene {\n  constructor() {\n    super('BootScene');\n  }\n\n  preload() {\n    // Generate simple placeholder textures programmatically\n    // Drone - Air (Triangle)\n    const gfx = this.make.graphics({ x: 0, y: 0 });\n    gfx.fillStyle(0x00ffff); // Cyan\n    gfx.fillTriangle(0, 20, 10, 0, 20, 20);\n    gfx.generateTexture('drone_air', 20, 20);\n\n    // Drone - Ground (Square)\n    gfx.clear();\n    gfx.fillStyle(0xffaa00); // Amber\n    gfx.fillRect(0, 0, 20, 20);\n    gfx.generateTexture('drone_ground', 20, 20);\n\n    // Wall (Gray Block)\n    gfx.clear();\n    gfx.fillStyle(0x666666);\n    gfx.fillRect(0, 0, 32, 32);\n    gfx.generateTexture('wall', 32, 32);\n    \n    // Low Wall (Darker Block)\n    gfx.clear();\n    gfx.fillStyle(0x444444);\n    gfx.fillRect(0, 0, 32, 32);\n    gfx.generateTexture('wall_low', 32, 32);\n  }\n\n  create() {\n    this.scene.start('GameScene');\n  }\n}\n","import { Scene, Physics } from 'phaser';\n\nexport abstract class BaseDrone extends Physics.Arcade.Sprite {\n  protected accelerationSpeed!: number;\n  protected dragForce!: number;\n  protected maxVelocitySpeed!: number;\n  public isActive: boolean = false;\n\n  constructor(scene: Scene, x: number, y: number, texture: string) {\n    super(scene, x, y, texture);\n    scene.add.existing(this);\n    scene.physics.add.existing(this);\n\n    this.setCollideWorldBounds(true);\n  }\n\n  abstract updateControl(cursors: Phaser.Types.Input.Keyboard.CursorKeys): void;\n\n  activate() {\n    this.isActive = true;\n    this.setTint(0xffffff); // Reset tint\n    this.setAlpha(1);\n  }\n\n  deactivate() {\n    this.isActive = false;\n    this.setAcceleration(0, 0);\n    this.setDrag(this.dragForce * 2); // Extra drag when inactive (parking brake)\n    this.setAlpha(0.6); // Dim to show inactive\n  }\n}\n","import { Scene } from 'phaser';\nimport { BaseDrone } from './BaseDrone';\n\nexport class Spectre extends BaseDrone {\n  constructor(scene: Scene, x: number, y: number) {\n    super(scene, x, y, 'drone_air');\n    \n    // Physics Config: Drifty, Fast\n    this.accelerationSpeed = 800;\n    this.dragForce = 400; \n    this.maxVelocitySpeed = 400;\n\n    this.setDrag(this.dragForce);\n    this.setMaxVelocity(this.maxVelocitySpeed);\n  }\n\n  updateControl(cursors: Phaser.Types.Input.Keyboard.CursorKeys) {\n    if (!this.isActive) return;\n\n    // Reset drag to normal in case it was high from deactivation\n    this.setDrag(this.dragForce);\n\n    const accelX = cursors.left.isDown ? -this.accelerationSpeed : cursors.right.isDown ? this.accelerationSpeed : 0;\n    const accelY = cursors.up.isDown ? -this.accelerationSpeed : cursors.down.isDown ? this.accelerationSpeed : 0;\n\n    this.setAcceleration(accelX, accelY);\n\n    // Visual Rotation (face movement direction)\n    if (this.body && this.body.velocity.length() > 10) {\n      this.rotation = this.body.velocity.angle() + Math.PI / 2;\n    }\n  }\n}\n","import { Scene } from 'phaser';\nimport { BaseDrone } from './BaseDrone';\n\nexport class Badger extends BaseDrone {\n  constructor(scene: Scene, x: number, y: number) {\n    super(scene, x, y, 'drone_ground');\n\n    // Physics Config: Heavy, Grippy\n    this.accelerationSpeed = 1000;\n    this.dragForce = 2000; // Stops almost instantly\n    this.maxVelocitySpeed = 150;\n\n    this.setDrag(this.dragForce);\n    this.setMaxVelocity(this.maxVelocitySpeed);\n  }\n\n  updateControl(cursors: Phaser.Types.Input.Keyboard.CursorKeys) {\n    if (!this.isActive) return;\n\n    this.setDrag(this.dragForce);\n\n    // Ground movement feels tighter\n    const accelX = cursors.left.isDown ? -this.accelerationSpeed : cursors.right.isDown ? this.accelerationSpeed : 0;\n    const accelY = cursors.up.isDown ? -this.accelerationSpeed : cursors.down.isDown ? this.accelerationSpeed : 0;\n\n    this.setAcceleration(accelX, accelY);\n\n    // Tank-like rotation (face movement instantly)\n    if (accelX !== 0 || accelY !== 0) {\n      this.rotation = Math.atan2(accelY, accelX);\n    }\n  }\n}\n","import { Scene } from 'phaser';\nimport { BaseDrone } from '../entities/drones/BaseDrone';\n\nexport class DroneManager {\n  private scene: Scene;\n  private activeDrone: BaseDrone;\n  private drones: BaseDrone[];\n  private cursors: Phaser.Types.Input.Keyboard.CursorKeys;\n\n  constructor(scene: Scene, drone1: BaseDrone, drone2: BaseDrone) {\n    this.scene = scene;\n    this.drones = [drone1, drone2];\n    this.activeDrone = drone1;\n    \n    this.cursors = this.scene.input.keyboard!.createCursorKeys();\n    \n    // Initialize\n    drone1.activate();\n    drone2.deactivate();\n  }\n\n  update(_time: number, _delta: number) {\n    this.activeDrone.updateControl(this.cursors);\n  }\n\n  switchDrone() {\n    // Find next drone\n    const currentIndex = this.drones.indexOf(this.activeDrone);\n    const nextIndex = (currentIndex + 1) % this.drones.length;\n    const nextDrone = this.drones[nextIndex];\n\n    // Toggle states\n    this.activeDrone.deactivate();\n    this.activeDrone = nextDrone;\n    this.activeDrone.activate();\n\n    // Update Camera\n    this.scene.cameras.main.startFollow(this.activeDrone, true, 0.1, 0.1);\n  }\n\n  getActiveDrone(): BaseDrone {\n    return this.activeDrone;\n  }\n}\n","import { Scene } from 'phaser';\nimport { Spectre } from '../entities/drones/Spectre';\nimport { Badger } from '../entities/drones/Badger';\nimport { DroneManager } from '../systems/DroneManager';\n\nexport class GameScene extends Scene {\n  private droneManager!: DroneManager;\n  private walls!: Phaser.Physics.Arcade.StaticGroup;\n  private lowWalls!: Phaser.Physics.Arcade.StaticGroup;\n\n  constructor() {\n    super('GameScene');\n  }\n\n  create() {\n    // 1. Setup World (Simple placeholder map)\n    this.createLevel();\n\n    // 2. Setup Drones\n    const spectre = new Spectre(this, 100, 100);\n    const badger = new Badger(this, 100, 200);\n\n    // 3. Setup Manager\n    this.droneManager = new DroneManager(this, spectre, badger);\n\n    // 4. Input\n    this.input.keyboard?.on('keydown-TAB', () => {\n      this.droneManager.switchDrone();\n    });\n\n    // 5. Collisions\n    // Note: Collision logic will be refined in the update loop or here based on active state\n    // For now, static collisions:\n    this.physics.add.collider(spectre, this.walls);\n    this.physics.add.collider(badger, this.walls);\n    this.physics.add.collider(badger, this.lowWalls); \n    // Spectre ignores lowWalls (no collider added)\n\n    // Camera\n    this.cameras.main.startFollow(this.droneManager.getActiveDrone(), true, 0.1, 0.1);\n  }\n\n  update(time: number, delta: number) {\n    this.droneManager.update(time, delta);\n  }\n\n  private createLevel() {\n    this.walls = this.physics.add.staticGroup();\n    this.lowWalls = this.physics.add.staticGroup();\n\n    // Create a simple box room\n    // Top/Bottom\n    for (let x = 0; x < 40; x++) {\n      this.walls.create(x * 32, 0, 'wall');\n      this.walls.create(x * 32, 600, 'wall');\n    }\n    // Left/Right\n    for (let y = 0; y < 20; y++) {\n      this.walls.create(0, y * 32, 'wall');\n      this.walls.create(1248, y * 32, 'wall');\n    }\n\n    // Add some \"Low Walls\" (Crates) in the middle\n    for (let x = 10; x < 15; x++) {\n      this.lowWalls.create(x * 32, 300, 'wall_low');\n    }\n  }\n}\n","import 'phaser';\nimport { BootScene } from './scenes/BootScene';\nimport { GameScene } from './scenes/GameScene';\n\nconst config: Phaser.Types.Core.GameConfig = {\n  type: Phaser.AUTO,\n  width: 1280,\n  height: 720,\n  parent: 'game-container',\n  backgroundColor: '#0a0a0a',\n  physics: {\n    default: 'arcade',\n    arcade: {\n      debug: true, // Enabled for development\n      gravity: { x: 0, y: 0 } // Top-down game, no gravity\n    }\n  },\n  scene: [BootScene, GameScene]\n};\n\nnew Phaser.Game(config);\n"],"names":["BootScene","Scene","gfx","BaseDrone","Physics","scene","x","y","texture","__publicField","Spectre","cursors","accelX","accelY","Badger","DroneManager","drone1","drone2","_time","_delta","nextIndex","nextDrone","GameScene","spectre","badger","_a","time","delta","config"],"mappings":"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"}