var h=Object.defineProperty;var d=(a,e,t)=>e in a?h(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var c=(a,e,t)=>d(a,typeof e!="symbol"?e+"":e,t);import{p as n}from"./phaser-B_Xz_Dzh.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();class p extends n.Scene{constructor(){super("BootScene")}preload(){const e=this.make.graphics({x:0,y:0});e.fillStyle(65535),e.fillTriangle(0,20,10,0,20,20),e.generateTexture("drone_air",20,20),e.clear(),e.fillStyle(16755200),e.fillRect(0,0,20,20),e.generateTexture("drone_ground",20,20),e.clear(),e.fillStyle(6710886),e.fillRect(0,0,32,32),e.generateTexture("wall",32,32),e.clear(),e.fillStyle(4473924),e.fillRect(0,0,32,32),e.generateTexture("wall_low",32,32)}create(){this.scene.start("GameScene")}}class l extends n.Physics.Arcade.Sprite{constructor(t,s,i,r){super(t,s,i,r);c(this,"accelerationSpeed");c(this,"dragForce");c(this,"maxVelocitySpeed");c(this,"isActive",!1);t.add.existing(this),t.physics.add.existing(this),this.setCollideWorldBounds(!0)}activate(){this.isActive=!0,this.setTint(16777215),this.setAlpha(1)}deactivate(){this.isActive=!1,this.setAcceleration(0,0),this.setDrag(this.dragForce*2),this.setAlpha(.6)}}class u extends l{constructor(e,t,s){super(e,t,s,"drone_air"),this.accelerationSpeed=800,this.dragForce=400,this.maxVelocitySpeed=400,this.setDrag(this.dragForce),this.setMaxVelocity(this.maxVelocitySpeed)}updateControl(e){if(!this.isActive)return;this.setDrag(this.dragForce);const t=e.left.isDown?-this.accelerationSpeed:e.right.isDown?this.accelerationSpeed:0,s=e.up.isDown?-this.accelerationSpeed:e.down.isDown?this.accelerationSpeed:0;this.setAcceleration(t,s),this.body&&this.body.velocity.length()>10&&(this.rotation=this.body.velocity.angle()+Math.PI/2)}}class g extends l{constructor(e,t,s){super(e,t,s,"drone_ground"),this.accelerationSpeed=1e3,this.dragForce=2e3,this.maxVelocitySpeed=150,this.setDrag(this.dragForce),this.setMaxVelocity(this.maxVelocitySpeed)}updateControl(e){if(!this.isActive)return;this.setDrag(this.dragForce);const t=e.left.isDown?-this.accelerationSpeed:e.right.isDown?this.accelerationSpeed:0,s=e.up.isDown?-this.accelerationSpeed:e.down.isDown?this.accelerationSpeed:0;this.setAcceleration(t,s),(t!==0||s!==0)&&(this.rotation=Math.atan2(s,t))}}class f{constructor(e,t,s){c(this,"scene");c(this,"activeDrone");c(this,"drones");c(this,"cursors");this.scene=e,this.drones=[t,s],this.activeDrone=t,this.cursors=this.scene.input.keyboard.createCursorKeys(),t.activate(),s.deactivate()}update(e,t){this.activeDrone.updateControl(this.cursors)}switchDrone(){const t=(this.drones.indexOf(this.activeDrone)+1)%this.drones.length,s=this.drones[t];this.activeDrone.deactivate(),this.activeDrone=s,this.activeDrone.activate(),this.scene.cameras.main.startFollow(this.activeDrone,!0,.1,.1)}getActiveDrone(){return this.activeDrone}}class y extends n.Scene{constructor(){super("GameScene");c(this,"droneManager");c(this,"walls");c(this,"lowWalls")}create(){var i;this.createLevel();const t=new u(this,100,100),s=new g(this,100,200);this.droneManager=new f(this,t,s),(i=this.input.keyboard)==null||i.on("keydown-TAB",()=>{this.droneManager.switchDrone()}),this.physics.add.collider(t,this.walls),this.physics.add.collider(s,this.walls),this.physics.add.collider(s,this.lowWalls),this.cameras.main.startFollow(this.droneManager.getActiveDrone(),!0,.1,.1)}update(t,s){this.droneManager.update(t,s)}createLevel(){this.walls=this.physics.add.staticGroup(),this.lowWalls=this.physics.add.staticGroup();for(let t=0;t<40;t++)this.walls.create(t*32,0,"wall"),this.walls.create(t*32,600,"wall");for(let t=0;t<20;t++)this.walls.create(0,t*32,"wall"),this.walls.create(1248,t*32,"wall");for(let t=10;t<15;t++)this.lowWalls.create(t*32,300,"wall_low")}}const w={type:Phaser.AUTO,width:1280,height:720,parent:"game-container",backgroundColor:"#0a0a0a",physics:{default:"arcade",arcade:{debug:!0,gravity:{x:0,y:0}}},scene:[p,y]};new Phaser.Game(w);
//# sourceMappingURL=index-jVTV_uR4.js.map
